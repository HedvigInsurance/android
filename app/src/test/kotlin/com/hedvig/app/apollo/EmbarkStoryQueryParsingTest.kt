@file:OptIn(ApolloExperimental::class)

package com.hedvig.app.apollo

import assertk.assertThat
import assertk.assertions.isEqualTo
import assertk.assertions.isNotNull
import com.apollographql.apollo3.annotations.ApolloExperimental
import com.apollographql.apollo3.mockserver.enqueue
import com.hedvig.android.apollo.graphql.EmbarkStoryQuery
import com.hedvig.android.apollo.graphql.type.buildEmbarkPassage
import com.hedvig.android.apollo.graphql.type.buildEmbarkStory
import com.hedvig.android.apollo.graphql.type.buildEmbarkTrack
import com.hedvig.app.testdata.feature.embark.data.STANDARD_STORY
import com.hedvig.app.testdata.feature.embark.data.STORY_WITH_GRAPHQL_MUTATION
import com.hedvig.app.testdata.feature.embark.data.STORY_WITH_GRAPHQL_MUTATION_AND_SINGLE_VARIABLE
import com.hedvig.app.testdata.feature.embark.data.STORY_WITH_GRAPHQL_QUERY_API_AND_GENERATED_VARIABLE
import com.hedvig.app.testdata.feature.embark.data.STORY_WITH_GRAPHQL_QUERY_API_AND_SINGLE_VARIABLE
import com.hedvig.app.testdata.feature.embark.data.STORY_WITH_INCOMPATIBLE_ACTION
import com.hedvig.app.testdata.feature.embark.data.STORY_WITH_NUMBER_ACTION
import com.hedvig.app.testdata.feature.embark.data.STORY_WITH_PASSED_KEY_VALUE
import com.hedvig.app.testdata.feature.embark.data.STORY_WITH_SELECT_ACTION_API_MULTIPLE_OPTIONS
import com.hedvig.app.testdata.feature.embark.data.STORY_WITH_TEXT_ACTION_API
import com.hedvig.app.testdata.feature.embark.data.STORY_WITH_UNARY_EXPRESSIONS
import org.json.JSONObject
import org.junit.Test

class EmbarkStoryQueryParsingTest {

  @Test
  fun `apollo parses a standard story`() = runApolloTest { mockServer, apolloClient ->
    val originalData = STANDARD_STORY
    val jsonData = originalData.toJsonStringWithData()
    mockServer.enqueue(jsonData)

    val response = apolloClient
      .query(EmbarkStoryQuery("", "sv_SE"))
      .execute()

    assertThat(response.data).isNotNull()
    assertThat(response.data!!).isEqualTo(originalData)
  }

  @Test
  fun `apollo parses a story with a graphql mutation`() = runApolloTest { mockServer, apolloClient ->
    val originalData = STORY_WITH_GRAPHQL_MUTATION
    val jsonData = originalData.toJsonStringWithData()
    mockServer.enqueue(jsonData)

    val response = apolloClient
      .query(EmbarkStoryQuery("", "sv_SE"))
      .execute()

    assertThat(response.data).isNotNull()
    assertThat(response.data!!).isEqualTo(originalData)
  }

  @Test
  fun `apollo parses a story with a graphql mutation with a single variable`() =
    runApolloTest { mockServer, apolloClient ->
      val originalData = STORY_WITH_GRAPHQL_MUTATION_AND_SINGLE_VARIABLE
      val jsonData = originalData.toJsonStringWithData()
      mockServer.enqueue(jsonData)

      val response = apolloClient
        .query(EmbarkStoryQuery("", "sv_SE"))
        .execute()

      assertThat(response.data).isNotNull()
      assertThat(response.data!!).isEqualTo(originalData)
    }

  @Test
  fun `apollo parses a story with a graphql query with a generated value`() =
    runApolloTest { mockServer, apolloClient ->
      val originalData = STORY_WITH_GRAPHQL_QUERY_API_AND_GENERATED_VARIABLE
      val jsonData = originalData.toJsonStringWithData()
      mockServer.enqueue(jsonData)

      val response = apolloClient
        .query(EmbarkStoryQuery("", "sv_SE"))
        .execute()

      assertThat(response.data).isNotNull()
      assertThat(response.data!!).isEqualTo(originalData)
    }

  @Test
  fun `apollo parses a story with a graphql query with a single value`() = runApolloTest { mockServer, apolloClient ->
    val originalData = STORY_WITH_GRAPHQL_QUERY_API_AND_SINGLE_VARIABLE
    val jsonData = originalData.toJsonStringWithData()
    mockServer.enqueue(jsonData)

    val response = apolloClient
      .query(EmbarkStoryQuery("", "sv_SE"))
      .execute()

    assertThat(response.data).isNotNull()
    assertThat(response.data!!).isEqualTo(originalData)
  }

  @Test
  fun `apollo parses a story with a graphql query with a number action`() =
    runApolloTest { mockServer, apolloClient ->
      val originalData = STORY_WITH_NUMBER_ACTION
      val jsonData = originalData.toJsonStringWithData()
      mockServer.enqueue(jsonData)

      val response = apolloClient
        .query(EmbarkStoryQuery("", "sv_SE"))
        .execute()

      assertThat(response.data).isNotNull()
      assertThat(response.data!!).isEqualTo(originalData)
    }

  @Test
  fun `apollo parses a story with a graphql query with a passed key value`() =
    runApolloTest { mockServer, apolloClient ->
      val originalData = STORY_WITH_PASSED_KEY_VALUE
      val jsonData = originalData.toJsonStringWithData()
      mockServer.enqueue(jsonData)

      val response = apolloClient
        .query(EmbarkStoryQuery("", "sv_SE"))
        .execute()

      assertThat(response.data).isNotNull()
      assertThat(response.data!!).isEqualTo(originalData)
    }

  @Test
  fun `apollo parses a story with a graphql query with a select action with multiple options`() =
    runApolloTest { mockServer, apolloClient ->
      val originalData = STORY_WITH_SELECT_ACTION_API_MULTIPLE_OPTIONS
      val jsonData = originalData.toJsonStringWithData()
      mockServer.enqueue(jsonData)

      val response = apolloClient
        .query(EmbarkStoryQuery("", "sv_SE"))
        .execute()

      assertThat(response.data).isNotNull()
      assertThat(response.data!!).isEqualTo(originalData)
    }

  @Test
  fun `apollo parses a story with a graphql query text action api`() = runApolloTest { mockServer, apolloClient ->
    val originalData = STORY_WITH_TEXT_ACTION_API
    val jsonData = originalData.toJsonStringWithData()
    mockServer.enqueue(jsonData)

    val response = apolloClient
      .query(EmbarkStoryQuery("", "sv_SE"))
      .execute()

    assertThat(response.data).isNotNull()
    assertThat(response.data!!).isEqualTo(originalData)
  }

  @Test
  fun `apollo parses a story with a message builder with expressions inside it`() =
    runApolloTest { mockServer, apolloClient ->
      val originalData = STORY_WITH_UNARY_EXPRESSIONS
      val jsonData = originalData.toJsonStringWithData()
      mockServer.enqueue(jsonData)

      val response = apolloClient
        .query(EmbarkStoryQuery("", "sv_SE"))
        .execute()

      assertThat(response.data).isNotNull()
      assertThat(response.data!!).isEqualTo(originalData)
    }

  @Test
  fun `apollo parses a story with an incompatible action`() = runApolloTest { mockServer, apolloClient ->
    val originalData = STORY_WITH_INCOMPATIBLE_ACTION
    val jsonData = originalData.toJsonStringWithData()
    mockServer.enqueue(jsonData)

    val response = apolloClient
      .query(EmbarkStoryQuery("", "sv_SE"))
      .execute()

    assertThat(response.data).isNotNull()
    assertThat(response.data!!).isEqualTo(originalData)
  }

  @Test
  fun `apollo parses a story from a real response example`() = runApolloTest { mockServer, apolloClient ->
    mockServer.enqueue(realResponseExample)

    val response = apolloClient
      .query(EmbarkStoryQuery("", "sv_SE"))
      .execute()

    assertThat(response.data).isNotNull()
  }

  @Test
  fun `apollo parses a story which contains a JSONString scalar`() = runApolloTest { mockServer, apolloClient ->
    mockServer.enqueue(
      EmbarkStoryQuery.Data(TestFakeResolver) {
        embarkStory = buildEmbarkStory {
          passages = listOf(
            buildEmbarkPassage {
              tracks = listOf(
                buildEmbarkTrack {
                  customData = JSONObject(
                    """
                    |{
                    |  "string": "Hello World",
                    |  "some": {
                    |    "arbitrary": [
                    |      { "object": 1 },
                    |      "object",
                    |      2
                    |    ],
                    |    "c": "d"
                    |  }
                    |}
                    """.trimMargin(),
                  )
                },
              )
            },
          )
        }
      }.toJsonStringWithData(),
    )

    val response = apolloClient
      .query(EmbarkStoryQuery("", "sv_SE"))
      .execute()

    assertThat(response.data).isNotNull()
    val jsonObject = response.dataAssertNoErrors.embarkStory!!.passages.first().tracks.first().customData!!
    assertThat(jsonObject.get("string")).isEqualTo("Hello World")
    val some = jsonObject.getJSONObject("some")
    assertThat(some.get("c")).isEqualTo("d")
    val arbitraryArray = some.getJSONArray("arbitrary")
    assertThat(arbitraryArray.getJSONObject(0).toString()).isEqualTo("""{"object":1}""")
    assertThat(arbitraryArray.get(1)).isEqualTo("object")
    assertThat(arbitraryArray.get(2)).isEqualTo(2)
  }

  @Test
  fun `apollo parses a story which contains a JSONString scalar which is minified`() =
    runApolloTest { mockServer, apolloClient ->
      mockServer.enqueue(
        EmbarkStoryQuery.Data(TestFakeResolver) {
          embarkStory = buildEmbarkStory {
            passages = listOf(
              buildEmbarkPassage {
                tracks = listOf(
                  buildEmbarkTrack {
                    customData = JSONObject(
                      """{"string":"Hello World","some":{"arbitrary":[{"object":1},"object",2],"c":"d"}}""",
                    )
                  },
                )
              },
            )
          }
        }.toJsonStringWithData(),
      )

      val response = apolloClient
        .query(EmbarkStoryQuery("", "sv_SE"))
        .execute()

      assertThat(response.data).isNotNull()
      val jsonObject = response.dataAssertNoErrors.embarkStory!!.passages.first().tracks.first().customData!!
      assertThat(jsonObject.get("string")).isEqualTo("Hello World")
      val some = jsonObject.getJSONObject("some")
      assertThat(some.get("c")).isEqualTo("d")
      val arbitraryArray = some.getJSONArray("arbitrary")
      assertThat(arbitraryArray.getJSONObject(0).toString()).isEqualTo("""{"object":1}""")
      assertThat(arbitraryArray.get(1)).isEqualTo("object")
      assertThat(arbitraryArray.get(2)).isEqualTo(2)
    }

  private val realResponseExample = """
        {"data":{"embarkStory":{"startPassage":"fb27322c-9661-4d34-af05-c36267bfb099","computedStoreValues":[{"key":"quoteCartId","value":"'65db82c7-0475-4793-84b8-57a1562cde5b'"},{"key":"numberCoInsured","value":"householdSize - 1"}],"passages":[{"name":"newAdressVilla","id":"003aceb1-c725-4491-a467-6ef39918ea1f","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Ok, no worries. What address do you want an offer for?"}],"response":{"__typename":"EmbarkResponseExpression","text":"{newAdressVillaResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkTextActionSet","textSetData":{"link":{"__typename":"EmbarkLink","name":"confirmInfoVilla","label":"Continue","hidden":false},"textActions":[{"data":{"key":"streetAddress","mask":null,"placeholder":"Examplestreet 21","title":"Address"}},{"data":{"key":"postalNumber","mask":"PostalCode","placeholder":"137 50","title":"Postal code"}}],"api":{"__typename":"EmbarkApiGraphQLQuery","queryData":{"query":"\n      query HouseInformation(        ${'$'}streetAddress        : String!,         ${'$'}postalNumber        : String!) {\n\t\t\thouseInformation(input: {\n\t\t\t\tstreetAddress:         ${'$'}streetAddress        ,\n\t\t\t\tpostalNumber:         ${'$'}postalNumber        \n\t\t\t}) {\n\t\t\t\tlivingSpace\n\t\t\t\tancillaryArea\n\t\t\t\tyearOfConstruction\n\t\t\t}\n\t\t}\n    ","results":[{"__typename":"EmbarkAPIGraphQLResult","key":"houseInformation.livingSpace","as":"livingSpace"},{"__typename":"EmbarkAPIGraphQLResult","key":"houseInformation.ancillaryArea","as":"ancillaryArea"},{"__typename":"EmbarkAPIGraphQLResult","key":"houseInformation.yearOfConstruction","as":"yearOfConstruction"}],"errors":[{"__typename":"EmbarkAPIGraphQLError","contains":null,"next":{"__typename":"EmbarkLink","name":"manualInfoVilla","label":"manualInfoVilla","hidden":false}}],"variables":[{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"streetAddress","from":"streetAddress","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"postalNumber","from":"postalNumber","as":"string"}],"next":{"__typename":"EmbarkLink","name":"confirmInfoVilla","label":"confirmInfoVilla","hidden":false}}}}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"confirmInfoVilla","label":"Continue","hidden":false},{"__typename":"EmbarkLink","name":"confirmInfoVilla","label":"confirmInfoVilla","hidden":false},{"__typename":"EmbarkLink","name":"manualInfoVilla","label":"manualInfoVilla","hidden":false}],"tracks":[{"eventName":"Passage Shown - newAdressVilla","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"newAdressVilla\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"newAddressApartment","id":"0226886f-b005-4e4a-a368-239d8c23dd8d","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Ok, no worries. What address do you want an offer for?"}],"response":{"__typename":"EmbarkResponseExpression","text":"{streetAddress}, {postalNumber}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkTextActionSet","textSetData":{"link":{"__typename":"EmbarkLink","name":"emailApartment","label":"Continue","hidden":false},"textActions":[{"data":{"key":"streetAddress","mask":null,"placeholder":"Examplestreet 21","title":"Address"}},{"data":{"key":"postalNumber","mask":"PostalCode","placeholder":"137 50","title":"Postal code"}}],"api":null}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"emailApartment","label":"Continue","hidden":false}],"tracks":[{"eventName":"Passage Shown - newAddressApartment","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"newAddressApartment\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"homeTypeVilla","id":"0fa9fe4e-97de-46c5-9f75-f7811fe5c064","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Do you rent or own the house?"}],"response":{"__typename":"EmbarkResponseExpression","text":"{homeTypeVillaResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkSelectAction","selectData":{"options":[{"link":{"__typename":"EmbarkLink","name":"livingSpaceApartment","label":"I rent it","hidden":false},"keys":["homeType","apartmentType","rentalType"],"values":["apartment","RENT","villa"],"badge":"","api":null},{"link":{"__typename":"EmbarkLink","name":"personalNumberVilla","label":"I own it","hidden":false},"keys":["homeType"],"values":["house"],"badge":"","api":null}]}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"livingSpaceApartment","label":"I rent it","hidden":false},{"__typename":"EmbarkLink","name":"personalNumberVilla","label":"I own it","hidden":false}],"tracks":[{"eventName":"Passage Shown - homeTypeVilla","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"homeTypeVilla\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"errorFloorsVilla","id":"18ff8d65-4a8a-48db-a532-deab7a879140","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Unfortunately we can only insure houses with a maximum of 4 floors at the moment."},{"__typename":"EmbarkMessage","expressions":[],"text":"Subscribe to our newsletter to be the first to know when we can insure homes like yours."}],"response":{"__typename":"EmbarkResponseExpression","text":"{errorFloorsVillaResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkSelectAction","selectData":{"options":[{"link":{"__typename":"EmbarkLink","name":"NewsletterSuccess","label":"Yes, subscribe to the newsletter","hidden":false},"keys":[],"values":[],"badge":"","api":null}]}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"NewsletterSuccess","label":"Yes, subscribe to the newsletter","hidden":false}],"tracks":[{"eventName":"Passage Shown - errorFloorsVilla","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"errorFloorsVilla\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"StudentEligibilityCheck","id":"1a00cfeb-6e21-4334-be77-93355147ada7","externalRedirect":null,"offerRedirect":null,"messages":[],"response":{"__typename":"EmbarkResponseExpression","text":"{StudentEligibilityCheckResult}","expressions":[]},"redirects":[{"__typename":"EmbarkRedirectMultipleExpressions","multipleExpressionType":"OR","to":"OfferApartment","passedExpressionKey":"isStudent","passedExpressionValue":"false","subExpressions":[{"__typename":"EmbarkExpressionMultiple","multipleType":"OR","text":null,"subExpressions":[{"__typename":"EmbarkExpressionBinary","binaryType":"MORE_THAN_OR_EQUALS","key":"personalNumber.Age","value":"30","text":null},{"__typename":"EmbarkExpressionBinary","binaryType":"MORE_THAN","key":"livingSpace","value":"250","text":null}]},{"__typename":"EmbarkExpressionBinary","binaryType":"MORE_THAN","key":"householdSize","value":"5","text":null}]},{"__typename":"EmbarkRedirectBinaryExpression","binaryType":"EQUALS","to":"StudentBrf","key":"apartmentType","value":"BRF","passedExpressionKey":null,"passedExpressionValue":null},{"__typename":"EmbarkRedirectBinaryExpression","binaryType":"EQUALS","to":"StudentRentQuestion","key":"apartmentType","value":"RENT","passedExpressionKey":null,"passedExpressionValue":null},{"__typename":"EmbarkRedirectUnaryExpression","unaryType":"ALWAYS","to":"OfferApartment","passedExpressionKey":null,"passedExpressionValue":null}],"action":null,"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"OfferApartment","label":"OfferApartment","hidden":false},{"__typename":"EmbarkLink","name":"StudentBrf","label":"StudentBrf","hidden":false},{"__typename":"EmbarkLink","name":"StudentRentQuestion","label":"StudentRentQuestion","hidden":false},{"__typename":"EmbarkLink","name":"OfferApartment","label":"OfferApartment","hidden":false}],"tracks":[{"eventName":"Passage Shown - StudentEligibilityCheck","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"StudentEligibilityCheck\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"extraBuildings","id":"22217560-1c8d-4506-a53b-f36e9ccc1de9","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"OK. Finally, we need some information about if there are any extra buildings on the site and if you want them to be covered by the insurance too."},{"__typename":"EmbarkMessage","expressions":[],"text":"If you don't want to insure any extra buildings, just press Continue"}],"response":{"__typename":"EmbarkGroupedResponse","title":{"__typename":"EmbarkResponseExpression","text":"Extra buildings","expressions":[]},"items":[],"each":{"key":"extraBuildings","content":{"__typename":"EmbarkMessage","expressions":[],"text":"{type.Label}, {area} square meters"}}},"redirects":[],"action":{"__typename":"EmbarkMultiAction","multiActionData":{"key":"extraBuildings","maxAmount":"4","addLabel":"Add building","link":{"__typename":"EmbarkLink","name":"emailVilla","label":"Continue","hidden":false},"components":[{"__typename":"EmbarkDropdownAction","dropDownActionData":{"label":"\n\t\t\t\t\tSelect type","key":"type","options":[{"value":"GARAGE","text":"Garage"},{"value":"ATTEFALL","text":"Attefall"},{"value":"FRIGGEBOD","text":"Friggebod"},{"value":"GUESTHOUSE","text":"Guest house"},{"value":"CARPORT","text":"Carport"},{"value":"SAUNA","text":"Sauna"},{"value":"BOATHOUSE","text":"Boathouse"},{"value":"OTHER","text":"Other"}]}},{"__typename":"EmbarkMultiActionNumberAction","numberActionData":{"key":"area","placeholder":"20","label":"","unit":"square meters"}},{"__typename":"EmbarkSwitchAction","switchActionData":{"label":"Water connected","key":"hasWaterConnected","defaultValue":false}}]}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"emailVilla","label":"Continue","hidden":false}],"tracks":[{"eventName":"Passage Shown - extraBuildings","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"extraBuildings\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"personalNumberVilla","id":"2fdf3701-458d-4862-81d2-c664649caef2","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"OK! All we need now is your personal identity number. This helps us fetch the rest of the information automatically so that we can create a personal offer just for you."}],"response":{"__typename":"EmbarkResponseExpression","text":"{personalNumberVillaResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkTextAction","textData":{"key":"personalNumber","placeholder":"yymmdd-xxxx","mask":"PersonalNumber","subtitle":"","link":{"__typename":"EmbarkLink","name":"personalNumberVillaCheck","label":"Continue","hidden":false},"api":{"__typename":"EmbarkApiGraphQLQuery","queryData":{"query":"\n      query PersonalInformation(        ${'$'}personalNumber        : String!) {\n\t\t\tpersonalInformation(input: {\n\t\t\t\tpersonalNumber:         ${'$'}personalNumber        \n\t\t\t}) {\n\t\t\t    __typename\n\t\t\t\tfirstName\n\t\t\t\tlastName\n\t\t\t\tstreetAddress\n\t\t\t\tpostalNumber\n\t\t\t\tcity\n\t\t\t}\n\t\t}\n    ","results":[{"__typename":"EmbarkAPIGraphQLResult","key":"personalInformation.__typename","as":"personalInformationTypename"},{"__typename":"EmbarkAPIGraphQLResult","key":"personalInformation.firstName","as":"firstName"},{"__typename":"EmbarkAPIGraphQLResult","key":"personalInformation.lastName","as":"lastName"},{"__typename":"EmbarkAPIGraphQLResult","key":"personalInformation.streetAddress","as":"streetAddress"},{"__typename":"EmbarkAPIGraphQLResult","key":"personalInformation.postalNumber","as":"postalNumber"},{"__typename":"EmbarkAPIGraphQLResult","key":"personalInformation.city","as":"city"}],"errors":[{"__typename":"EmbarkAPIGraphQLError","contains":null,"next":{"__typename":"EmbarkLink","name":"manualNameVilla","label":"manualNameVilla","hidden":false}}],"variables":[{"__typename":"EmbarkAPIGraphQLSingleVariable","key": "personalNumber","from":"personalNumber","as":"string"}],"next":{"__typename":"EmbarkLink","name":"personalNumberVillaCheck","label":"personalNumberVillaCheck","hidden":false}}}}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"personalNumberVillaCheck","label":"Continue","hidden":false},{"__typename":"EmbarkLink","name":"personalNumberVillaCheck","label":"personalNumberVillaCheck","hidden":false},{"__typename":"EmbarkLink","name":"manualNameVilla","label":"manualNameVilla","hidden":false}],"tracks":[{"eventName":"Passage Shown - personalNumberVilla","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"personalNumberVilla\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"OfferError","id":"36117f17-1b29-451f-b07b-d15e30fc6640","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Something appears to have gone wrong and we can’t give you a price quote right now. Please try again. If it still doesn’t work you can write us in the chat on the website!"}],"response":{"__typename":"EmbarkResponseExpression","text":"{OfferErrorResult}","expressions":[]},"redirects":[],"action":null,"api":null,"tooltips":[],"allLinks":[],"tracks":[{"eventName":"Passage Shown - OfferError","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"OfferError\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"homeTypeApartment","id":"39142b33-ab60-4ad4-ac5a-c7f8c8a7da85","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Do you rent it or own it?"}],"response":{"__typename":"EmbarkResponseExpression","text":"{homeTypeApartmentResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkSelectAction","selectData":{"options":[{"link":{"__typename":"EmbarkLink","name":"livingSpaceApartment","label":"I rent a sublet","hidden":false},"keys":["apartmentType","rentalType"],"values":["RENT","apartment"],"badge":"","api":null},{"link":{"__typename":"EmbarkLink","name":"livingSpaceApartment","label":"I own it","hidden":false},"keys":["apartmentType"],"values":["BRF"],"badge":"","api":null},{"link":{"__typename":"EmbarkLink","name":"livingSpaceApartment","label":"I rent it","hidden":false},"keys":["apartmentType","rentalType"],"values":["RENT","apartment"],"badge":"","api":null}]}},"api":null,"tooltips":[{"title":"I rent a sublet","description":"You live in an apartment that is subletted to you"},{"title":"I own it","description":"You own an apartment and need tenant ownership insurance"},{"title":"I rent it","description":"You rent an apartment or own one and don't need tenant ownership insurance."}],"allLinks":[{"__typename":"EmbarkLink","name":"livingSpaceApartment","label":"I rent a sublet","hidden":false},{"__typename":"EmbarkLink","name":"livingSpaceApartment","label":"I own it","hidden":false},{"__typename":"EmbarkLink","name":"livingSpaceApartment","label":"I rent it","hidden":false}],"tracks":[{"eventName":"Passage Shown - homeTypeApartment","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"homeTypeApartment\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"offerUwLimit","id":"3f899050-7425-46b6-8ded-cd17be666732","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Unfortunately we're unable to give you an offer via our website and one of our insurance experts will need to take a look at your application. Please email us at hedvig@hedvig.com to get your offer"}],"response":{"__typename":"EmbarkResponseExpression","text":"{offerUwLimitResult}","expressions":[]},"redirects":[],"action":null,"api":null,"tooltips":[],"allLinks":[],"tracks":[{"eventName":"Passage Shown - offerUwLimit","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"offerUwLimit\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"householdSizeApartment","id":"4ace3231-adc5-480d-a4b8-a63d75580a12","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"How many people should be covered by the insurance?"},{"__typename":"EmbarkMessage","expressions":[{"__typename":"EmbarkExpressionBinary","binaryType":"EQUALS","key":"subletter","value":"true","text":"If additional people are to be covered, please add the size of their rooms to the total area."}],"text":"If additional people are to be covered, please add the size of their rooms to the total area."}],"response":{"__typename":"EmbarkResponseExpression","text":"{householdSize}  people (incl. yourself)\n  \n  \n    Just me","expressions":[{"__typename":"EmbarkExpressionBinary","binaryType":"MORE_THAN","key":"householdSize","value":"1","text":"{householdSize}  people (incl. yourself)"},{"__typename":"EmbarkExpressionBinary","binaryType":"EQUALS","key":"householdSize","value":"1","text":"Just me"}]},"redirects":[{"__typename":"EmbarkRedirectBinaryExpression","binaryType":"MORE_THAN","to":"errorLivingSpaceApartment","key":"livingSpace","value":"250","passedExpressionKey":null,"passedExpressionValue":null}],"action":{"__typename":"EmbarkNumberAction","numberActionData":{"__typename":"EmbarkNumberActionData","key":"householdSize","placeholder":"2","unit":"people (incl. yourself) ","label":"","maxValue":null,"minValue":1,"link":{"__typename":"EmbarkLink","name":"personalNumberApartment","label":"Continue","hidden":false}}},"api":null,"tooltips":[{"title":"Number of insured persons","description":"E.g. partner, children or roomies that should be covered. All insured must live together with you to be covered by your insurance."}],"allLinks":[{"__typename":"EmbarkLink","name":"errorLivingSpaceApartment","label":"errorLivingSpaceApartment","hidden":false},{"__typename":"EmbarkLink","name":"personalNumberApartment","label":"Continue","hidden":false}],"tracks":[{"eventName":"Passage Shown - householdSizeApartment","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"householdSizeApartment\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"manualInfoVilla","id":"4c16bfde-9271-4813-9962-0e147bec0f69","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"We can't fetch any information about your house. But no worries. You can simply fill in the information right here."}],"response":{"__typename":"EmbarkGroupedResponse","title":{"__typename":"EmbarkResponseExpression","text":"House information","expressions":[]},"items":[{"__typename":"EmbarkMessage","expressions":[],"text":"Living space: {livingSpace} square meters"},{"__typename":"EmbarkMessage","expressions":[],"text":"Ancillary area: {ancillaryArea} square meters"},{"__typename":"EmbarkMessage","expressions":[],"text":"Year of construction: {yearOfConstruction}"}],"each":null},"redirects":[],"action":{"__typename":"EmbarkNumberActionSet","numberActionSetData":{"numberActions":[{"data":{"key":"livingSpace","placeholder":"120","unit":"square meters","label":"","maxValue":null,"minValue":1,"title":"Living space"}},{"data":{"key":"ancillaryArea","placeholder":"60","unit":"square meters","label":"","maxValue":null,"minValue":null,"title":"Ancillary area"}},{"data":{"key":"yearOfConstruction","placeholder":"1998","unit":"","label":"","maxValue":null,"minValue":1,"title":"Year of construction"}}],"link":{"__typename":"EmbarkLink","name":"bathsVilla","label":"Continue","hidden":false}}},"api":null,"tooltips":[{"title":"Living space","description":"Living space is the space meant to live in."},{"title":"Ancillary area","description":"Examples of spaces that count as ancillary areas are storage rooms, attics and garage connected to the house."},{"title":"Year of construction","description":"The year the house was built."}],"allLinks":[{"__typename":"EmbarkLink","name":"bathsVilla","label":"Continue","hidden":false}],"tracks":[{"eventName":"Passage Shown - manualInfoVilla","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"manualInfoVilla\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"subletting","id":"4e5f71b5-75f5-4cf5-a7ef-7e7c6033559f","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Are you subletting any part of your house to someone?"}],"response":{"__typename":"EmbarkResponseExpression","text":"{sublettingResult}","expressions":[]},"redirects":[{"__typename":"EmbarkRedirectBinaryExpression","binaryType":"MORE_THAN","to":"errorhouseholdSizeVilla","key":"householdSize","value":"6","passedExpressionKey":null,"passedExpressionValue":null}],"action":{"__typename":"EmbarkSelectAction","selectData":{"options":[{"link":{"__typename":"EmbarkLink","name":"extraBuildings","label":"No, I don't sublet","hidden":false},"keys":["isSubleted"],"values":["false"],"badge":"","api":null},{"link":{"__typename":"EmbarkLink","name":"extraBuildings","label":"Yes, I sublet","hidden":false},"keys":["isSubleted"],"values":["true"],"badge":"","api":null}]}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"errorhouseholdSizeVilla","label":"errorhouseholdSizeVilla","hidden":false},{"__typename":"EmbarkLink","name":"extraBuildings","label":"No, I don't sublet","hidden":false},{"__typename":"EmbarkLink","name":"extraBuildings","label":"Yes, I sublet","hidden":false}],"tracks":[{"eventName":"Passage Shown - subletting","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"subletting\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"confirmAddressApartment","id":"55330e30-7c04-42ac-914c-cc2fb8bf9e68","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Great. Is it the residence at {streetAddress} you want an offer for?"}],"response":{"__typename":"EmbarkResponseExpression","text":"{confirmAddressApartmentResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkSelectAction","selectData":{"options":[{"link":{"__typename":"EmbarkLink","name":"emailApartment","label":"Yes","hidden":false},"keys":[],"values":[],"badge":"","api":null},{"link":{"__typename":"EmbarkLink","name":"newAddressApartment","label":"No","hidden":false},"keys":[],"values":[],"badge":"","api":null}]}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"emailApartment","label":"Yes","hidden":false},{"__typename":"EmbarkLink","name":"newAddressApartment","label":"No","hidden":false}],"tracks":[{"eventName":"Passage Shown - confirmAddressApartment","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"confirmAddressApartment\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"emailVilla","id":"57ca7de3-784f-4998-befc-8b77cb6720f0","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"OK, we are almost there. Before we proceed to your offer we need your email address. That way we can reach out to you if discounts or other beneficial changes would appear after you've already received your offer."}],"response":{"__typename":"EmbarkResponseExpression","text":"{emailVillaResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkTextAction","textData":{"key":"email","placeholder":"email@address.com","mask":"Email","subtitle":"","link":{"__typename":"EmbarkLink","name":"OfferVilla","label":"Continue","hidden":false},"api":null}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"OfferVilla","label":"Continue","hidden":false}],"tracks":[{"eventName":"Passage Shown - emailVilla","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"emailVilla\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"errorAgeVilla","id":"5d180ed6-6526-4dd9-92ba-34f837dd47f4","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Unfortunately we can't insure houses built before 1926 at the moment."},{"__typename":"EmbarkMessage","expressions":[],"text":"Subscribe to our newsletter to be the first to know when we can insure homes like yours."}],"response":{"__typename":"EmbarkResponseExpression","text":"{errorAgeVillaResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkSelectAction","selectData":{"options":[{"link":{"__typename":"EmbarkLink","name":"NewsletterSuccess","label":"Yes, subscribe to the newsletter","hidden":false},"keys":[],"values":[],"badge":"","api":null}]}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"NewsletterSuccess","label":"Yes, subscribe to the newsletter","hidden":false}],"tracks":[{"eventName":"Passage Shown - errorAgeVilla","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"errorAgeVilla\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"floorsVilla","id":"61a44e64-ba89-4cad-bfec-737511641e56","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"How many floors does the house have? Keep in mind that the cellar counts as a floor."}],"response":{"__typename":"EmbarkResponseExpression","text":"{floorsVillaResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkSelectAction","selectData":{"options":[{"link":{"__typename":"EmbarkLink","name":"householdSizeVilla","label":"Four floors or less","hidden":false},"keys":[],"values":[],"badge":"","api":null},{"link":{"__typename":"EmbarkLink","name":"errorFloorsVilla","label":"More than four floors","hidden":false},"keys":[],"values":[],"badge":"","api":null}]}},"api":null,"tooltips":[{"title":"Four floors or less","description":"The house has maximum four floors, including the cellar."},{"title":"More than four floors","description":"The house has more than four floors, including the cellar"}],"allLinks":[{"__typename":"EmbarkLink","name":"householdSizeVilla","label":"Four floors or less","hidden":false},{"__typename":"EmbarkLink","name":"errorFloorsVilla","label":"More than four floors","hidden":false}],"tracks":[{"eventName":"Passage Shown - floorsVilla","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"floorsVilla\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"manualAdressVilla","id":"631499ee-8974-4d52-a0e3-b6ad9afbfa12","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"What address do you want an offer for?"}],"response":{"__typename":"EmbarkResponseExpression","text":"{streetAddress}, {postalNumber}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkTextActionSet","textSetData":{"link":{"__typename":"EmbarkLink","name":"confirmInfoVilla","label":"Continue","hidden":false},"textActions":[{"data":{"key":"streetAddress","mask":null,"placeholder":"Examplestreet 21","title":"Address"}},{"data":{"key":"postalNumber","mask":"PostalCode","placeholder":"137 50","title":"Postal code"}}],"api":{"__typename":"EmbarkApiGraphQLQuery","queryData":{"query":"\n      query HouseInformation(        ${'$'}streetAddress        : String!,         ${'$'}postalNumber        : String!) {\n\t\t\thouseInformation(input: {\n\t\t\t\tstreetAddress:         ${'$'}streetAddress        ,\n\t\t\t\tpostalNumber:         ${'$'}postalNumber        \n\t\t\t}) {\n\t\t\t\tlivingSpace\n\t\t\t\tancillaryArea\n\t\t\t\tyearOfConstruction\n\t\t\t}\n\t\t}\n    ","results":[{"__typename":"EmbarkAPIGraphQLResult","key":"houseInformation.livingSpace","as":"livingSpace"},{"__typename":"EmbarkAPIGraphQLResult","key":"houseInformation.ancillaryArea","as":"ancillaryArea"},{"__typename":"EmbarkAPIGraphQLResult","key":"houseInformation.yearOfConstruction","as":"yearOfConstruction"}],"errors":[{"__typename":"EmbarkAPIGraphQLError","contains":null,"next":{"__typename":"EmbarkLink","name":"manualInfoVilla","label":"manualInfoVilla","hidden":false}}],"variables":[{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"streetAddress","from":"streetAddress","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"postalNumber","from":"postalNumber","as":"string"}],"next":{"__typename":"EmbarkLink","name":"confirmInfoVilla","label":"confirmInfoVilla","hidden":false}}}}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"confirmInfoVilla","label":"Continue","hidden":false},{"__typename":"EmbarkLink","name":"confirmInfoVilla","label":"confirmInfoVilla","hidden":false},{"__typename":"EmbarkLink","name":"manualInfoVilla","label":"manualInfoVilla","hidden":false}],"tracks":[{"eventName":"Passage Shown - manualAdressVilla","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"manualAdressVilla\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"errorHouseholdSizeApartment","id":"6e2eba98-24f2-4bc4-8b60-4b9f0284c705","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Unfortunately we can only insure homes with a maximum of 6 people living in it right now."},{"__typename":"EmbarkMessage","expressions":[],"text":"Subscribe to our newsletter to be the first to know when we can insure homes like yours."}],"response":{"__typename":"EmbarkResponseExpression","text":"{errorHouseholdSizeApartmentResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkSelectAction","selectData":{"options":[{"link":{"__typename":"EmbarkLink","name":"NewsletterSuccess","label":"Yes, subscribe to the newsletter","hidden":false},"keys":[],"values":[],"badge":"","api":null}]}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"NewsletterSuccess","label":"Yes, subscribe to the newsletter","hidden":false}],"tracks":[{"eventName":"Passage Shown - errorHouseholdSizeApartment","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"errorHouseholdSizeApartment\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"StudentBrf","id":"72ac690a-c351-4d97-8042-81cd0203f778","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Are you possibly a student? In that case you can get our student discount."}],"response":{"__typename":"EmbarkResponseExpression","text":"{StudentBrfResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkSelectAction","selectData":{"options":[{"link":{"__typename":"EmbarkLink","name":"OfferApartment","label":"Yes","hidden":false},"keys":["apartmentType","isStudent"],"values":["STUDENT_BRF","true"],"badge":"","api":null},{"link":{"__typename":"EmbarkLink","name":"OfferApartment","label":"No","hidden":false},"keys":["apartmentType","isStudent"],"values":["BRF","false"],"badge":"","api":null}]}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"OfferApartment","label":"Yes","hidden":false},{"__typename":"EmbarkLink","name":"OfferApartment","label":"No","hidden":false}],"tracks":[{"eventName":"Passage Shown - StudentBrf","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"StudentBrf\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"errorInfoVilla","id":"7fa318c0-4a20-4842-b5aa-f2ee1ce33f9a","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Unfortunately we can't insure houses that big right now."},{"__typename":"EmbarkMessage","expressions":[],"text":"Subscribe to our newsletter to be the first to know when we can insure homes like yours."}],"response":{"__typename":"EmbarkResponseExpression","text":"{errorInfoVillaResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkSelectAction","selectData":{"options":[{"link":{"__typename":"EmbarkLink","name":"NewsletterSuccess","label":"Yes, subscribe to the newsletter","hidden":false},"keys":[],"values":[],"badge":"","api":null}]}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"NewsletterSuccess","label":"Yes, subscribe to the newsletter","hidden":false}],"tracks":[{"eventName":"Passage Shown - errorInfoVilla","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"errorInfoVilla\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"manualAdressApartment","id":"89072812-379f-4c1b-8dd6-845e555ed63e","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"What address do you want an offer for?"}],"response":{"__typename":"EmbarkResponseExpression","text":"{streetAddress}, {postalNumber}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkTextActionSet","textSetData":{"link":{"__typename":"EmbarkLink","name":"emailApartment","label":"Continue","hidden":false},"textActions":[{"data":{"key":"streetAddress","mask":null,"placeholder":"Examplestreet 21","title":"Address"}},{"data":{"key":"postalNumber","mask":"PostalCode","placeholder":"137 50","title":"Postal code"}}],"api":null}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"emailApartment","label":"Continue","hidden":false}],"tracks":[{"eventName":"Passage Shown - manualAdressApartment","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"manualAdressApartment\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"householdSizeVilla","id":"8d10ddae-0b92-4ccf-98ed-ecdded5e5b35","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"How many people should be covered by the insurance?"}],"response":{"__typename":"EmbarkResponseExpression","text":"{householdSize}  people (incl. yourself)\n  \n  \n    Just me","expressions":[{"__typename":"EmbarkExpressionBinary","binaryType":"MORE_THAN","key":"householdSize","value":"1","text":"{householdSize}  people (incl. yourself)"},{"__typename":"EmbarkExpressionBinary","binaryType":"EQUALS","key":"householdSize","value":"1","text":"Just me"}]},"redirects":[],"action":{"__typename":"EmbarkNumberAction","numberActionData":{"__typename":"EmbarkNumberActionData","key":"householdSize","placeholder":"2","unit":"people (incl. yourself) ","label":"","maxValue":null,"minValue":1,"link":{"__typename":"EmbarkLink","name":"subletting","label":"Continue","hidden":false}}},"api":null,"tooltips":[{"title":"Number of insured persons","description":"E.g. partner, children or roomies that should be covered. All insured must live together with you to be covered by your insurance."}],"allLinks":[{"__typename":"EmbarkLink","name":"subletting","label":"Continue","hidden":false}],"tracks":[{"eventName":"Passage Shown - householdSizeVilla","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"householdSizeVilla\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"personalNumberApartment","id":"8f733833-b599-4677-ae5b-ba563edb24a1","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"OK! All we need now is your personal identity number. This helps us fetch the rest of the information automatically so that we can create a personal offer just for you."}],"response":{"__typename":"EmbarkResponseExpression","text":"{personalNumberApartmentResult}","expressions":[]},"redirects":[{"__typename":"EmbarkRedirectBinaryExpression","binaryType":"MORE_THAN","to":"errorHouseholdSizeApartment","key":"householdSize","value":"6","passedExpressionKey":null,"passedExpressionValue":null}],"action":{"__typename":"EmbarkTextAction","textData":{"key":"personalNumber","placeholder":"yymmdd-xxxx","mask":"PersonalNumber","subtitle":"","link":{"__typename":"EmbarkLink","name":"personalInformationCheck","label":"Continue","hidden":false},"api":{"__typename":"EmbarkApiGraphQLQuery","queryData":{"query":"\n      query PersonalInformation(        ${'$'}personalNumber        : String!) {\n\t\t\tpersonalInformation(input: {\n\t\t\t\tpersonalNumber:         ${'$'}personalNumber        \n\t\t\t}) {\n\t\t\t    __typename\n\t\t\t\tfirstName\n\t\t\t\tlastName\n\t\t\t\tstreetAddress\n\t\t\t\tpostalNumber\n\t\t\t\tcity\n\t\t\t}\n\t\t}\n    ","results":[{"__typename":"EmbarkAPIGraphQLResult","key":"personalInformation.__typename","as":"personalInformationTypename"},{"__typename":"EmbarkAPIGraphQLResult","key":"personalInformation.firstName","as":"firstName"},{"__typename":"EmbarkAPIGraphQLResult","key":"personalInformation.lastName","as":"lastName"},{"__typename":"EmbarkAPIGraphQLResult","key":"personalInformation.streetAddress","as":"streetAddress"},{"__typename":"EmbarkAPIGraphQLResult","key":"personalInformation.postalNumber","as":"postalNumber"},{"__typename":"EmbarkAPIGraphQLResult","key":"personalInformation.city","as":"city"}],"errors":[{"__typename":"EmbarkAPIGraphQLError","contains":null,"next":{"__typename":"EmbarkLink","name":"manualNameApartment","label":"manualNameApartment","hidden":false}}],"variables":[{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"personalNumber","from":"personalNumber","as":"string"}],"next":{"__typename":"EmbarkLink","name":"personalInformationCheck","label":"personalInformationCheck","hidden":false}}}}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"errorHouseholdSizeApartment","label":"errorHouseholdSizeApartment","hidden":false},{"__typename":"EmbarkLink","name":"personalInformationCheck","label":"Continue","hidden":false},{"__typename":"EmbarkLink","name":"personalInformationCheck","label":"personalInformationCheck","hidden":false},{"__typename":"EmbarkLink","name":"manualNameApartment","label":"manualNameApartment","hidden":false}],"tracks":[{"eventName":"Passage Shown - personalNumberApartment","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"personalNumberApartment\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"NewsletterSuccess","id":"9726349b-00be-4f00-ad5e-198416938f57","externalRedirect":{"data":{"location":"MailingList"}},"offerRedirect":null,"messages":[],"response":{"__typename":"EmbarkResponseExpression","text":"{NewsletterSuccessResult}","expressions":[]},"redirects":[],"action":null,"api":null,"tooltips":[],"allLinks":[],"tracks":[{"eventName":"Passage Shown - NewsletterSuccess","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"NewsletterSuccess\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"bathsVilla","id":"97c4d36d-5c1f-4d04-97e7-efcc2e3b65c2","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"How many bathrooms are there in the house?"},{"__typename":"EmbarkMessage","expressions":[],"text":"Smaller guest toilets without a shower or bathtub are not considered a bathroom."}],"response":{"__typename":"EmbarkResponseExpression","text":"{bathsVillaResult}","expressions":[]},"redirects":[{"__typename":"EmbarkRedirectMultipleExpressions","multipleExpressionType":"OR","to":"errorInfoVilla","passedExpressionKey":null,"passedExpressionValue":null,"subExpressions":[{"__typename":"EmbarkExpressionBinary","binaryType":"MORE_THAN","key":"livingSpace","value":"250","text":null},{"__typename":"EmbarkExpressionBinary","binaryType":"MORE_THAN_OR_EQUALS","key":"ancillaryArea","value":"250","text":null}]},{"__typename":"EmbarkRedirectBinaryExpression","binaryType":"LESS_THAN","to":"errorAgeVilla","key":"yearOfConstruction","value":"1910","passedExpressionKey":null,"passedExpressionValue":null}],"action":{"__typename":"EmbarkSelectAction","selectData":{"options":[{"link":{"__typename":"EmbarkLink","name":"floorsVilla","label":"1","hidden":false},"keys":["numberOfBathrooms"],"values":["1"],"badge":"","api":null},{"link":{"__typename":"EmbarkLink","name":"floorsVilla","label":"2","hidden":false},"keys":["numberOfBathrooms"],"values":["2"],"badge":"","api":null},{"link":{"__typename":"EmbarkLink","name":"floorsVilla","label":"3","hidden":false},"keys":["numberOfBathrooms"],"values":["3"],"badge":"","api":null},{"link":{"__typename":"EmbarkLink","name":"floorsVilla","label":"4+","hidden":false},"keys":["numberOfBathrooms"],"values":["4"],"badge":"","api":null}]}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"errorInfoVilla","label":"errorInfoVilla","hidden":false},{"__typename":"EmbarkLink","name":"errorAgeVilla","label":"errorAgeVilla","hidden":false},{"__typename":"EmbarkLink","name":"floorsVilla","label":"1","hidden":false},{"__typename":"EmbarkLink","name":"floorsVilla","label":"2","hidden":false},{"__typename":"EmbarkLink","name":"floorsVilla","label":"3","hidden":false},{"__typename":"EmbarkLink","name":"floorsVilla","label":"4+","hidden":false}],"tracks":[{"eventName":"Passage Shown - bathsVilla","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"bathsVilla\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"homeType","id":"994f2275-ffe0-4c7e-996d-e869d919400c","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"What type of residence is it?"}],"response":{"__typename":"EmbarkResponseExpression","text":"{homeTypeResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkSelectAction","selectData":{"options":[{"link":{"__typename":"EmbarkLink","name":"homeTypeApartment","label":"Apartment","hidden":false},"keys":["homeType"],"values":["apartment"],"badge":"","api":null},{"link":{"__typename":"EmbarkLink","name":"homeTypeVilla","label":"House","hidden":false},"keys":["homeType"],"values":["house"],"badge":"","api":null},{"link":{"__typename":"EmbarkLink","name":"livingSpaceApartment","label":"Student housing","hidden":false},"keys":["homeType","apartmentType","rentalType"],"values":["apartment","RENT","studentHousing"],"badge":"","api":null},{"link":{"__typename":"EmbarkLink","name":"livingSpaceApartment","label":"Renting a room","hidden":false},"keys":["homeType","apartmentType","rentalType"],"values":["apartment","RENT","subletter"],"badge":"","api":null}]}},"api":null,"tooltips":[{"title":"Apartment","description":"For those of you who rent or own an apartment"},{"title":"House","description":"For those of you who live in a detached or terraced house. We don't insure holiday homes"},{"title":"Student housing","description":"For those of you who rent a student apartment or a room in a student corridor"},{"title":"Renting a room","description":"For those of you who rent one or several rooms in an apartment or a house"}],"allLinks":[{"__typename":"EmbarkLink","name":"homeTypeApartment","label":"Apartment","hidden":false},{"__typename":"EmbarkLink","name":"homeTypeVilla","label":"House","hidden":false},{"__typename":"EmbarkLink","name":"livingSpaceApartment","label":"Student housing","hidden":false},{"__typename":"EmbarkLink","name":"livingSpaceApartment","label":"Renting a room","hidden":false}],"tracks":[{"eventName":"Passage Shown - homeType","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"homeType\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"emailApartment","id":"9f5fb600-3b89-4ed6-b652-2e10ddb12c87","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"OK, we are almost there. Before we proceed to your offer we need your email address. That way we can reach out to you if discounts or other beneficial changes would appear after you've already received your offer."}],"response":{"__typename":"EmbarkResponseExpression","text":"{emailApartmentResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkTextAction","textData":{"key":"email","placeholder":"email@address.com","mask":"Email","subtitle":"","link":{"__typename":"EmbarkLink","name":"StudentEligibilityCheck","label":"Continue","hidden":false},"api":null}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"StudentEligibilityCheck","label":"Continue","hidden":false}],"tracks":[{"eventName":"Passage Shown - emailApartment","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"emailApartment\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"confirmInfoVilla","id":"a96432e2-a38a-459e-b2f0-412ad68d19e4","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Great, we've fetched some information about your house."},{"__typename":"EmbarkMessage","expressions":[],"text":"Is this correct?"}],"response":{"__typename":"EmbarkGroupedResponse","title":{"__typename":"EmbarkResponseExpression","text":"House information","expressions":[]},"items":[{"__typename":"EmbarkMessage","expressions":[],"text":"Living space: {livingSpace} square meters"},{"__typename":"EmbarkMessage","expressions":[],"text":"Ancillary area: {ancillaryArea} square meters"},{"__typename":"EmbarkMessage","expressions":[],"text":"Year of construction: {yearOfConstruction}"}],"each":null},"redirects":[],"action":{"__typename":"EmbarkNumberActionSet","numberActionSetData":{"numberActions":[{"data":{"key":"livingSpace","placeholder":"120","unit":"square meters","label":"","maxValue":null,"minValue":1,"title":"Living space"}},{"data":{"key":"ancillaryArea","placeholder":"60","unit":"square meters","label":"","maxValue":null,"minValue":null,"title":"Ancillary area"}},{"data":{"key":"yearOfConstruction","placeholder":"1998","unit":"","label":"","maxValue":null,"minValue":1,"title":"Year of construction"}}],"link":{"__typename":"EmbarkLink","name": "bathsVilla","label":"Continue","hidden":false}}},"api":null,"tooltips":[{"title":"Living space","description":"Living space is the space meant to live in."},{"title":"Ancillary area","description":"Examples of spaces that count as ancillary areas are storage rooms, attics and garage connected to the house."},{"title":"Year of construction","description":"The year the house was built."}],"allLinks":[{"__typename":"EmbarkLink","name":"bathsVilla","label":"Continue","hidden":false}],"tracks":[{"eventName":"Passage Shown - confirmInfoVilla","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"confirmInfoVilla\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"manualNameVilla","id":"aac92908-58d7-4676-8cdb-abb886436d7a","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"It seems like we can't find your address right now. Let us ask a couple of extra questions so that we can locate it."},{"__typename":"EmbarkMessage","expressions":[],"text":"What's your name?"}],"response":{"__typename":"EmbarkResponseExpression","text":"{manualNameVillaResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkTextActionSet","textSetData":{"link":{"__typename":"EmbarkLink","name":"manualAdressVilla","label":"Continue","hidden":false},"textActions":[{"data":{"key":"firstName","mask":null,"placeholder":"Hedvig","title":"First name"}},{"data":{"key":"lastName","mask":null,"placeholder":"Andersson","title":"Surname"}}],"api":null}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"manualAdressVilla","label":"Continue","hidden":false}],"tracks":[{"eventName":"Passage Shown - manualNameVilla","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"manualNameVilla\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"confirmAdressVilla","id":"aeb166b2-18e1-40fa-97e5-0cd76a6c8bfa","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Great. Is it the house on {streetAddress} you want an offer for?"}],"response":{"__typename":"EmbarkResponseExpression","text":"{confirmAdressVillaResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkSelectAction","selectData":{"options":[{"link":{"__typename":"EmbarkLink","name":"confirmInfoVilla","label":"Yes","hidden":false},"keys":[],"values":[],"badge":"","api":{"__typename":"EmbarkApiGraphQLQuery","queryData":{"query":"\n        query HouseInformation(        ${'$'}streetAddress        : String!,         ${'$'}postalNumber        : String!) {\n\t\t\thouseInformation(input: {\n\t\t\t\tstreetAddress:         ${'$'}streetAddress        ,\n\t\t\t\tpostalNumber:         ${'$'}postalNumber        \n\t\t\t}) {\n\t\t\t\tlivingSpace\n\t\t\t\tancillaryArea\n\t\t\t\tyearOfConstruction\n\t\t\t}\n\t\t}\n      ","results":[{"__typename":"EmbarkAPIGraphQLResult","key":"houseInformation.livingSpace","as":"livingSpace"},{"__typename":"EmbarkAPIGraphQLResult","key":"houseInformation.ancillaryArea","as":"ancillaryArea"},{"__typename":"EmbarkAPIGraphQLResult","key":"houseInformation.yearOfConstruction","as":"yearOfConstruction"}],"errors":[{"__typename":"EmbarkAPIGraphQLError","contains":null,"next":{"__typename":"EmbarkLink","name":"manualInfoVilla","label":"manualInfoVilla","hidden":false}}],"variables":[{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"streetAddress","from":"streetAddress","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"postalNumber","from":"postalNumber","as":"string"}],"next":{"__typename":"EmbarkLink","name":"confirmInfoVilla","label":"confirmInfoVilla","hidden":false}}}},{"link":{"__typename":"EmbarkLink","name":"newAdressVilla","label":"No","hidden":false},"keys":[],"values":[],"badge":"","api":null}]}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"confirmInfoVilla","label":"Yes","hidden":false},{"__typename":"EmbarkLink","name":"confirmInfoVilla","label":"confirmInfoVilla","hidden":false},{"__typename":"EmbarkLink","name":"manualInfoVilla","label":"manualInfoVilla","hidden":false},{"__typename":"EmbarkLink","name":"newAdressVilla","label":"No","hidden":false}],"tracks":[{"eventName":"Passage Shown - confirmAdressVilla","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"confirmAdressVilla\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"personalInformationCheck","id":"b9d3eeea-be2c-4a16-a38c-49685b54228f","externalRedirect":null,"offerRedirect":null,"messages":[],"response":{"__typename":"EmbarkResponseExpression","text":"{personalInformationCheckResult}","expressions":[]},"redirects":[{"__typename":"EmbarkRedirectBinaryExpression","binaryType":"NOT_EQUALS","to":"manualNameApartment","key":"personalInformationTypename","value":"PersonalInformation","passedExpressionKey":null,"passedExpressionValue":null},{"__typename":"EmbarkRedirectUnaryExpression","unaryType":"ALWAYS","to":"confirmAddressApartment","passedExpressionKey":null,"passedExpressionValue":null}],"action":null,"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"manualNameApartment","label":"manualNameApartment","hidden":false},{"__typename":"EmbarkLink","name":"confirmAddressApartment","label":"confirmAddressApartment","hidden":false}],"tracks":[{"eventName":"Passage Shown - personalInformationCheck","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"personalInformationCheck\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"manualNameApartment","id":"ba7b3c56-87c5-494b-8489-6cc2e66ee5dd","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"It seems like we can't find your address right now. Let us ask a couple of extra questions so that we can locate it."},{"__typename":"EmbarkMessage","expressions":[],"text":"What's your name?"}],"response":{"__typename":"EmbarkResponseExpression","text":"{manualNameApartmentResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkTextActionSet","textSetData":{"link":{"__typename":"EmbarkLink","name":"manualAdressApartment","label":"Continue","hidden":false},"textActions":[{"data":{"key":"firstName","mask":null,"placeholder":"Hedvig","title":"First name"}},{"data":{"key":"lastName","mask":null,"placeholder":"Andersson","title":"Surname"}}],"api":null}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"manualAdressApartment","label":"Continue","hidden":false}],"tracks":[{"eventName":"Passage Shown - manualNameApartment","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"manualNameApartment\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"ApartmentUwlimitsHit","id":"bacb87c7-8659-4303-a17c-ef8a308069a3","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Unfortunately we're unable to give you an offer via our website and one of our insurance experts will need to take a look at your application. Please email us at hedvig@hedvig.com to get your offer"}],"response":{"__typename":"EmbarkResponseExpression","text":"{ApartmentUwlimitsHitResult}","expressions":[]},"redirects":[],"action":null,"api":null,"tooltips":[],"allLinks":[],"tracks":[{"eventName":"Passage Shown - ApartmentUwlimitsHit","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"ApartmentUwlimitsHit\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"errorhouseholdSizeVilla","id":"bad894cb-1008-43b5-833e-f723c29fa257","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Unfortunately we can only insure homes with a maximum of 6 people living in it right now."},{"__typename":"EmbarkMessage","expressions":[],"text":"Subscribe to our newsletter to be the first to know when we can insure homes like yours."}],"response":{"__typename":"EmbarkResponseExpression","text":"{errorhouseholdSizeVillaResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkSelectAction","selectData":{"options":[{"link":{"__typename":"EmbarkLink","name":"NewsletterSuccess","label":"Yes, subscribe to the newsletter","hidden":false},"keys":[],"values":[],"badge":"","api":null}]}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"NewsletterSuccess","label":"Yes, subscribe to the newsletter","hidden":false}],"tracks":[{"eventName":"Passage Shown - errorhouseholdSizeVilla","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"errorhouseholdSizeVilla\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"personalNumberVillaCheck","id":"bf968716-771d-4bd5-a746-5e335bfeab50","externalRedirect":null,"offerRedirect":null,"messages":[],"response":{"__typename":"EmbarkResponseExpression","text":"{personalNumberVillaCheckResult}","expressions":[]},"redirects":[{"__typename":"EmbarkRedirectBinaryExpression","binaryType":"NOT_EQUALS","to":"manualNameVilla","key":"personalInformationTypename","value":"PersonalInformation","passedExpressionKey":null,"passedExpressionValue":null},{"__typename":"EmbarkRedirectUnaryExpression","unaryType":"ALWAYS","to":"confirmAdressVilla","passedExpressionKey":null,"passedExpressionValue":null}],"action":null,"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"manualNameVilla","label":"manualNameVilla","hidden":false},{"__typename":"EmbarkLink","name":"confirmAdressVilla","label":"confirmAdressVilla","hidden":false}],"tracks":[{"eventName":"Passage Shown - personalNumberVillaCheck","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"personalNumberVillaCheck\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"errorLivingSpaceApartment","id":"cb50ae49-8047-45d9-99d8-75a5e75413ab","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Unfortunately we can't insure homes that big right now."},{"__typename":"EmbarkMessage","expressions":[],"text":"Subscribe to our newsletter to be the first to know when we can insure homes like yours."}],"response":{"__typename":"EmbarkResponseExpression","text":"{errorLivingSpaceApartmentResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkSelectAction","selectData":{"options":[{"link":{"__typename":"EmbarkLink","name":"NewsletterSuccess","label":"Yes, subscribe to the newsletter","hidden":false},"keys":[],"values":[],"badge":"","api":null}]}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"NewsletterSuccess","label":"Yes, subscribe to the newsletter","hidden":false}],"tracks":[{"eventName":"Passage Shown - errorLivingSpaceApartment","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"errorLivingSpaceApartment\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"OfferSuccess","id":"f1f7698f-9a82-4051-bfbc-d9ea554b1599","externalRedirect":null,"offerRedirect":null,"messages":[],"response":{"__typename":"EmbarkResponseExpression","text":"{OfferSuccessResult}","expressions":[]},"redirects":[{"__typename":"EmbarkRedirectBinaryExpression","binaryType":"EQUALS","to":"offerUwLimit","key":"createQuoteBundleResultTypename","value":"QuoteBundleError","passedExpressionKey":null,"passedExpressionValue":null}],"action":null,"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"offerUwLimit","label":"offerUwLimit","hidden":false}],"tracks":[{"eventName":"Passage Shown - OfferSuccess","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"OfferSuccess\"}"}],"quoteCartOfferRedirects":[{"data":{"id":"quoteCartId","expression":{"__typename":"EmbarkExpressionMultiple","multipleType":"AND","text":null,"subExpressions":[{"__typename":"EmbarkExpressionBinary","binaryType":"EQUALS","key":"insuranceType","value":"homeAccident","text":null},{"__typename":"EmbarkExpressionBinary","binaryType":"EQUALS","key":"homeType","value":"house","text":null}]},"selectedInsuranceTypes":["SWEDISH_HOUSE","SWEDISH_ACCIDENT"]}},{"data":{"id":"quoteCartId","expression":{"__typename":"EmbarkExpressionMultiple","multipleType":"AND","text":null,"subExpressions":[{"__typename":"EmbarkExpressionBinary","binaryType":"EQUALS","key":"insuranceType","value":"homeAccident","text":null},{"__typename":"EmbarkExpressionBinary","binaryType":"EQUALS","key":"homeType","value":"apartment","text":null}]},"selectedInsuranceTypes":["SWEDISH_APARTMENT","SWEDISH_ACCIDENT"]}},{"data":{"id":"quoteCartId","expression":{"__typename":"EmbarkExpressionBinary","binaryType":"EQUALS","key":"homeType","value":"house","text":null},"selectedInsuranceTypes":["SWEDISH_HOUSE"]}},{"data":{"id":"quoteCartId","expression":{"__typename":"EmbarkExpressionUnary","unaryType":"ALWAYS","text":null},"selectedInsuranceTypes":["SWEDISH_APARTMENT"]}}],"variantedOfferRedirects":[]},{"name":"livingSpaceApartment","id":"f7059443-cf86-4506-9916-de069176336d","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[{"__typename":"EmbarkExpressionBinary","binaryType":"EQUALS","key":"apartmentType","value":"BRF","text":"How big is the apartment?"},{"__typename":"EmbarkExpressionBinary","binaryType":"EQUALS","key":"rentalType","value":"apartment","text":"How big is the apartment?"},{"__typename":"EmbarkExpressionBinary","binaryType":"EQUALS","key":"rentalType","value":"villa","text":"How big is the house?"},{"__typename":"EmbarkExpressionBinary","binaryType":"EQUALS","key":"rentalType","value":"studentHousing","text":"How big is it?"},{"__typename":"EmbarkExpressionBinary","binaryType":"EQUALS","key":"rentalType","value":"subletter","text":"How big is your room and the common areas you have access to? Common areas might include a kitchen, bathroom or living room."}],"text":"How big is the apartment?\n  \n  \n    How big is the apartment?\n  \n  \n    How big is the house?\n  \n  \n    How big is it?\n  \n  \n    How big is your room and the common areas you have access to? Common areas might include a kitchen, bathroom or living room."}],"response":{"__typename":"EmbarkResponseExpression","text":"{livingSpace} square meters","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkNumberAction","numberActionData":{"__typename":"EmbarkNumberActionData","key":"livingSpace","placeholder":"52","unit":"square meters","label":"","maxValue":null,"minValue":1,"link":{"__typename":"EmbarkLink","name":"householdSizeApartment","label":"Continue","hidden":false}}},"api":null,"tooltips":[{"title":"Living space","description":"The total area of the residence in square meters. If you're unsure you can find this information in your lease or purchase contract."}],"allLinks":[{"__typename":"EmbarkLink","name":"householdSizeApartment","label":"Continue","hidden":false}],"tracks":[{"eventName":"Passage Shown - livingSpaceApartment","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"livingSpaceApartment\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"StudentRentQuestion","id":"fed366b6-866f-4e2d-812a-f3d12b09975a","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Are you possibly a student? In that case you can get our student discount."}],"response":{"__typename":"EmbarkResponseExpression","text":"{StudentRentQuestionResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkSelectAction","selectData":{"options":[{"link":{"__typename":"EmbarkLink","name":"OfferApartment","label":"Yes","hidden":false},"keys":["apartmentType","isStudent"],"values":["STUDENT_RENT","true"],"badge":"","api":null},{"link":{"__typename":"EmbarkLink","name":"OfferApartment","label":"No","hidden":false},"keys":["apartmentType","isStudent"],"values":["RENT","false"],"badge":"","api":null}]}},"api":null,"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"OfferApartment","label":"Yes","hidden":false},{"__typename":"EmbarkLink","name":"OfferApartment","label":"No","hidden":false}],"tracks":[{"eventName":"Passage Shown - StudentRentQuestion","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"StudentRentQuestion\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"OfferApartment","id":"3797dc2f-9088-46de-80fb-5f4f86d66792","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Ok. Your offer is ready!"}],"response":{"__typename":"EmbarkResponseExpression","text":"{OfferApartmentResult}","expressions":[]},"redirects":[],"action":null,"api":{"__typename":"EmbarkApiGraphQLMutation","mutationData":{"mutation":"\n    mutation CreateSwedishNeederApartmentQuoteBundle(\n\t          ${'$'}quoteCartId        : ID!\n\t          ${'$'}input        : CreateQuoteBundleInput!\n\t) {\n\t  quoteCart_createQuoteBundle(id:         ${'$'}quoteCartId        , input:         ${'$'}input        ) {\n\t  \t__typename\n\t\t... on QuoteCart {\n\t\t  id\n\t\t}\n\t\t... on QuoteBundleError {\n\t\t  limits {\n\t\t\tcode\n\t\t  }\n\t\t}\n\t  }\n\t}\n  ","results":[{"__typename":"EmbarkAPIGraphQLResult","key":"quoteCart_createQuoteBundle.__typename","as":"createQuoteBundleResultTypename"}],"variables":[{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"quoteCartId","from":"quoteCartId","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].firstName","from":"firstName","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[1].firstName","from":"firstName","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].lastName","from":"lastName","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[1].lastName","from":"lastName","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].ssn","from":"personalNumber","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[1].ssn","from":"personalNumber","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].email","from":"email","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[1].email","from":"email","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].data.numberCoInsured","from":"numberCoInsured","as":"int"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[1].data.numberCoInsured","from":"numberCoInsured","as":"int"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].data.livingSpace","from":"livingSpace","as":"int"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[1].data.livingSpace","from":"livingSpace","as":"int"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].data.street","from":"streetAddress","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[1].data.street","from":"streetAddress","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].data.zipCode","from":"postalNumber","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[1].data.zipCode","from":"postalNumber","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].data.subType","from":"apartmentType","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[1].data.isStudent","from":"isStudent","as":"boolean"},{"__typename":"EmbarkAPIGraphQLConstantVariable","key":"input.payload[0].data.type","value":"SWEDISH_APARTMENT","as":"string"},{"__typename":"EmbarkAPIGraphQLConstantVariable","key":"input.payload[1].data.type","value":"SWEDISH_ACCIDENT","as":"string"}],"errors":[{"__typename":"EmbarkAPIGraphQLError","contains":null,"next":{"__typename":"EmbarkLink","name":"OfferError","label":"OfferError","hidden":false}}],"next":{"__typename":"EmbarkLink","name":"OfferSuccess","label":"OfferSuccess","hidden":false}}},"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"OfferSuccess","label":"OfferSuccess","hidden":false},{"__typename":"EmbarkLink","name":"OfferError","label":"OfferError","hidden":false}],"tracks":[{"eventName":"Passage Shown - OfferApartment","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"OfferApartment\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"OfferVilla","id":"bf5aecf8-117a-4f9e-a927-54d803a70c5c","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Ok. Your offer is ready!"}],"response":{"__typename":"EmbarkResponseExpression","text":"{OfferVillaResult}","expressions":[]},"redirects":[],"action":null,"api":{"__typename":"EmbarkApiGraphQLMutation","mutationData":{"mutation":"\n    mutation CreateSwedishNeederHouseQuoteBundle(\n            ${'$'}quoteCartId        : ID!\n            ${'$'}input        : CreateQuoteBundleInput!\n  ) {\n    quoteCart_createQuoteBundle(id:         ${'$'}quoteCartId        , input:         ${'$'}input        ) {\n      __typename\n      ... on QuoteCart {\n        id\n      }\n      ... on QuoteBundleError {\n        limits {\n          code\n        }\n      }\n    }\n  }\n  ","results":[{"__typename":"EmbarkAPIGraphQLResult","key":"quoteCart_createQuoteBundle.__typename","as":"createQuoteBundleResultTypename"}],"variables":[{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"quoteCartId","from":"quoteCartId","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].firstName","from":"firstName","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[1].firstName","from":"firstName","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].lastName","from":"lastName","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[1].lastName","from":"lastName","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].ssn","from":"personalNumber","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[1].ssn","from":"personalNumber","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].email","from":"email","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[1].email","from":"email","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].data.numberCoInsured","from":"numberCoInsured","as":"int"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[1].data.numberCoInsured","from":"numberCoInsured","as":"int"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].data.livingSpace","from":"livingSpace","as":"int"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[1].data.livingSpace","from":"livingSpace","as":"int"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].data.street","from":"streetAddress","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[1].data.street","from":"streetAddress","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].data.zipCode","from":"postalNumber","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[1].data.zipCode","from":"postalNumber","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].data.ancillaryArea","from":"ancillaryArea","as":"int"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].data.yearOfConstruction","from":"yearOfConstruction","as":"int"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].data.numberOfBathrooms","from":"numberOfBathrooms","as":"int"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"input.payload[0].data.isSubleted","from":"isSubleted","as":"boolean"},{"__typename":"EmbarkAPIGraphQLMultiActionVariable","key":"input.payload[0].data.extraBuildings","from":"extraBuildings","variables":[{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"type","from":"type","as":"string"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"area","from":"area","as":"int"},{"__typename":"EmbarkAPIGraphQLSingleVariable","key":"hasWaterConnected","from":"hasWaterConnected","as":"boolean"}]},{"__typename":"EmbarkAPIGraphQLConstantVariable","key":"input.payload[0].data.type","value":"SWEDISH_HOUSE","as":"string"},{"__typename":"EmbarkAPIGraphQLConstantVariable","key":"input.payload[1].data.type","value":"SWEDISH_ACCIDENT","as":"string"},{"__typename":"EmbarkAPIGraphQLConstantVariable","key":"input.payload[1].data.isStudent","value":"false","as":"boolean"}],"errors":[{"__typename":"EmbarkAPIGraphQLError","contains":null,"next":{"__typename":"EmbarkLink","name":"OfferError","label":"OfferError","hidden":false}}],"next":{"__typename":"EmbarkLink","name":"OfferSuccess","label":"OfferSuccess","hidden":false}}},"tooltips":[],"allLinks":[{"__typename":"EmbarkLink","name":"OfferSuccess","label":"OfferSuccess","hidden":false},{"__typename":"EmbarkLink","name":"OfferError","label":"OfferError","hidden":false}],"tracks":[{"eventName":"Passage Shown - OfferVilla","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"OfferVilla\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]},{"name":"insuranceType","id":"fb27322c-9661-4d34-af05-c36267bfb099","externalRedirect":null,"offerRedirect":null,"messages":[{"__typename":"EmbarkMessage","expressions":[],"text":"Hi! Let's get you an offer, it'll only take a minute."},{"__typename":"EmbarkMessage","expressions":[],"text":"What kind of insurances are you interested in getting an offer for?"}],"response":{"__typename":"EmbarkResponseExpression","text":"{insuranceTypeResult}","expressions":[]},"redirects":[],"action":{"__typename":"EmbarkSelectAction","selectData":{"options":[{"link":{"__typename":"EmbarkLink","name":"homeType","label":"Home & Accident Insurance","hidden":false},"keys":["insuranceType"],"values":["homeAccident"],"badge":"","api":null},{"link":{"__typename":"EmbarkLink","name":"homeType","label":"Home Insurance","hidden":false},"keys":["insuranceType"],"values":["home"],"badge":"","api":null}]}},"api":null,"tooltips":[{"title":"Home & Accident Insurance","description":"Comprehensive protection for you, your home and your stuff. Extra insurance for accidents that covers up to 6 people."},{"title":"Home Insurance","description":"Comprehensive protection for you, your home and your stuff."}],"allLinks":[{"__typename":"EmbarkLink","name":"homeType","label":"Home & Accident Insurance","hidden":false},{"__typename":"EmbarkLink","name":"homeType","label":"Home Insurance","hidden":false}],"tracks":[{"eventName":"Passage Shown - insuranceType","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":null},{"eventName":"passage_shown","eventKeys":["OfferErrorResult","ancillaryArea","apartmentType","errorAgeVillaResult","errorFloorsVillaResult","errorInfoVillaResult","homeType","householdSize","insuranceType","isStudent","isSubleted","livingSpace","numberOfBathrooms","postalNumber","quoteCartId","rentalType","yearOfConstruction"],"includeAllKeys":false,"customData":"{\"passageName\":\"insuranceType\"}"}],"quoteCartOfferRedirects":[],"variantedOfferRedirects":[]}]}}}
  """.trimIndent()
}
