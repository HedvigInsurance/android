query InsuranceContracts(
  $addonsEnabled: Boolean!,
  $options: DisplayItemOptions) {
  currentMember {
    memberActions {
      isMovingEnabled
    }
    firstName
    lastName
    ssn
    terminatedContracts {
      ...ContractFragment
    }

    activeContracts {
      ...ContractFragment
    }

    pendingContracts {
      id
      premium {
        ...MoneyFragment
      }
      productVariant {
        ...ProductVariantFragment
      }
      exposureDisplayName
      displayItems {
        ...AgreementDisplayItemFragment
      }
      addons @include(if: $addonsEnabled) {
        addonVariant {
          ...AddonVariantFragment
        }
        premium {
          ...MoneyFragment
        }
      }
      cost {
        ...MonthlyCostFragment
      }
      basePremium {
        ...MoneyFragment
      }
    }
  }
}

fragment ContractFragment on Contract {
  id
  masterInceptionDate
  terminationDate
  exposureDisplayName
  supportsMoving
  supportsCoInsured
  supportsChangeTier
  coInsured {
    firstName
    lastName
    ssn
    birthdate
    hasMissingInfo
    activatesOn
    terminatesOn
  }
  currentAgreement {
    ...AgreementFragment
  }
  upcomingChangedAgreement {
    ...AgreementFragment
  }
}

fragment AgreementFragment on Agreement {
  activeFrom
  activeTo
  certificateUrl
  creationCause
  displayItems (options: $options) {
    ...AgreementDisplayItemFragment
  }
  productVariant {
    ...ProductVariantFragment
  }
  addons @include(if: $addonsEnabled) {
    addonVariant {
      ...AddonVariantFragment
    }
    premium {
      ...MoneyFragment
    }
  }
  cost {
    ...MonthlyCostFragment
  }
  basePremium {
    ...MoneyFragment
  }
}

fragment AgreementDisplayItemFragment on AgreementDisplayItem {
  displayTitle
  displayValue
}

fragment MonthlyCostFragment on ItemCost {
  monthlyGross {
    ...MoneyFragment
  }
  monthlyNet {
    ...MoneyFragment
  }
  discounts {
    displayName
    displayValue
    explanation
    campaignCode
  }
}
