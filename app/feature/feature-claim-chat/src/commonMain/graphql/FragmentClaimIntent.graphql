fragment ClaimIntentFragment on ClaimIntent {
  id
  currentStep {
    id
    text
    content {
      ...ClaimIntentStepContentFragment
    }
  }
  outcome {
    ...ClaimIntentOutcomeClaimFragment
    ...ClaimIntentOutcomeDeflectionFragment
  }
  sourceMessages {
    id
    text
  }
}

fragment ClaimIntentStepContentFragment on ClaimIntentStepContent {
  ...FormFragment
  ...ContentSelectFragment
  ...TaskFragment
  ...AudioRecordingFragment
  ...FileUploadFragment
  ...SummaryFragment
}

fragment ClaimIntentOutcomeClaimFragment on ClaimIntentOutcomeClaim {
  claimId
  claim {
    submittedAt
  }
}

fragment ClaimIntentOutcomeDeflectionFragment on ClaimIntentOutcomeDeflection {
  type
  title
  description
  partners {
    id
    title
  }
}

fragment FormFragment on ClaimIntentStepContentForm {
  fields {
    id
    type
    title
    suffix
    isRequired
    options {
      title
      value
    }
    defaultValues
    minValue
    maxValue
  }
  isSkippable
  isRegrettable
}

fragment ContentSelectFragment on ClaimIntentStepContentSelect {
  options {
    id
    title
  }
  isSkippable
  isRegrettable
}

fragment TaskFragment on ClaimIntentStepContentTask {
  description
  isCompleted
}

fragment AudioRecordingFragment on ClaimIntentStepContentAudioRecording {
  hint
  uploadUri
  isSkippable
  isRegrettable
}

fragment FileUploadFragment on ClaimIntentStepContentFileUpload {
  uploadUri
  isRegrettable
  isSkippable
}

fragment SummaryFragment on ClaimIntentStepContentSummary {
  items {
    title
    value
  }
  audioRecordings {
    url
  }
  fileUploads {
    url
    contentType
    fileName
  }
}
